<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>×—×™×“×•×Ÿ ×—×œ×œ - ×‘×™×ª ×¡×¤×¨</title>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: 'Segoe UI', sans-serif; background: linear-gradient(135deg, #0f0c29, #302b63, #24243e); color: white; min-height: 100vh; padding: 20px; text-align: center; }
        .container { max-width: 1000px; margin: 0 auto; padding: 20px; }
        header { margin-bottom: 30px; padding: 20px; background: rgba(0,0,0,0.5); border-radius: 15px; border: 2px solid #4fc3f7; box-shadow: 0 0 20px rgba(79,195,247,0.3); }
        h1 { color: #4fc3f7; font-size: 2.5em; margin-bottom: 10px; text-shadow: 0 0 10px rgba(79,195,247,0.5); }
        h2 { color: #ffca28; margin: 20px 0; font-size: 1.8em; }
        h3 { color: #81d4fa; margin: 15px 0; }
        .login-container { background: rgba(0,0,0,0.7); padding: 30px; border-radius: 15px; margin: 20px auto; max-width: 500px; border: 2px solid #ffca28; }
        .role-selector { display: flex; justify-content: center; gap: 20px; margin: 20px 0; }
        .role-btn { padding: 15px 30px; font-size: 18px; border-radius: 10px; border: 2px solid transparent; background: rgba(30,30,60,0.8); color: white; cursor: pointer; transition: all 0.3s ease; font-weight: bold; }
        .role-btn.active { background: linear-gradient(145deg, #4fc3f7, #29b6f6); color: black; border-color: #4fc3f7; }
        .role-btn:hover { transform: translateY(-2px); }
        .input-group { margin: 20px 0; text-align: right; }
        label { display: block; margin-bottom: 8px; color: #ffca28; font-weight: bold; }
        input, select { width: 100%; padding: 12px; font-size: 16px; border-radius: 10px; border: 2px solid #4fc3f7; background: #111; color: white; text-align: center; }
        .password-note { font-size: 14px; color: #81d4fa; margin-top: 10px; font-style: italic; }
        .class-selector { background: rgba(0,0,0,0.7); padding: 20px; border-radius: 15px; margin: 20px auto; max-width: 500px; }
        .quiz-container { background: rgba(0,0,0,0.7); padding: 30px; border-radius: 15px; margin: 20px auto; min-height: 400px; display: flex; flex-direction: column; justify-content: center; }
        .question-box { background: rgba(30,30,60,0.8); padding: 25px; border-radius: 15px; margin-bottom: 30px; border: 1px solid #4fc3f7; }
        .question-text { font-size: 1.5em; margin-bottom: 25px; line-height: 1.5; color: #fff; }
        .answers-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-top: 20px; }
        @media (max-width: 768px) { .answers-grid { grid-template-columns: 1fr; } }
        .answer-btn { padding: 15px; font-size: 16px; border-radius: 10px; border: none; background: linear-gradient(145deg, #1a237e, #283593); color: white; cursor: pointer; transition: all 0.3s ease; border: 2px solid transparent; }
        .answer-btn:hover { background: linear-gradient(145deg, #283593, #3949ab); transform: translateY(-2px); box-shadow: 0 5px 15px rgba(0,0,0,0.3); }
        .answer-btn.correct { background: linear-gradient(145deg, #1b5e20, #2e7d32); border-color: #4caf50; }
        .answer-btn.wrong { background: linear-gradient(145deg, #b71c1c, #c62828); border-color: #f44336; }
        .scoreboard { background: rgba(0,0,0,0.7); padding: 20px; border-radius: 15px; margin-top: 30px; border: 2px solid #ffca28; }
        .score-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(120px, 1fr)); gap: 10px; margin-top: 20px; }
        .score-item { background: rgba(30,30,60,0.8); padding: 10px; border-radius: 8px; border: 1px solid #4fc3f7; position: relative; }
        .class-name { font-weight: bold; color: #ffca28; }
        .class-points { font-size: 1.2em; font-weight: bold; color: #4fc3f7; }
        .teacher-controls { margin-top: 10px; display: flex; gap: 5px; justify-content: center; }
        .teacher-btn { padding: 5px 10px; font-size: 12px; border-radius: 5px; border: none; cursor: pointer; background: #ffca28; color: black; font-weight: bold; }
        .controls { margin: 20px 0; display: flex; justify-content: center; gap: 15px; flex-wrap: wrap; }
        button { padding: 12px 25px; font-size: 16px; border-radius: 10px; border: none; cursor: pointer; font-weight: bold; transition: all 0.3s ease; }
        #loginBtn, #startBtn, #nextBtn { background: linear-gradient(145deg, #4fc3f7, #29b6f6); color: black; }
        #logoutBtn, #resetBtn { background: linear-gradient(145deg, #ffca28, #ffb300); color: black; }
        .logout-section { position: absolute; top: 20px; left: 20px; }
        button:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(0,0,0,0.3); }
        .progress { margin: 20px 0; font-size: 18px; color: #ffca28; }
        .feedback { margin-top: 20px; padding: 15px; border-radius: 10px; font-size: 1.2em; font-weight: bold; display: none; }
        .correct-feedback { background: rgba(76,175,80,0.2); border: 2px solid #4caf50; color: #4caf50; }
        .wrong-feedback { background: rgba(244,67,54,0.2); border: 2px solid #f44336; color: #f44336; }
        .stars { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: -1; }
        .star { position: absolute; background: white; border-radius: 50%; animation: twinkle 5s infinite; }
        @keyframes twinkle { 0%,100% { opacity: 0.3; } 50% { opacity: 1; } }
        .hidden { display: none; }
        .teacher-menu { background: rgba(0,0,0,0.7); padding: 20px; border-radius: 15px; margin: 20px auto; max-width: 600px; border: 2px solid #ffca28; }
        .admin-controls { display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 15px; margin-top: 20px; }
        .admin-panel { background: rgba(30,30,60,0.8); padding: 15px; border-radius: 10px; }
        .admin-btn { margin: 5px; padding: 8px 15px; background: linear-gradient(145deg, #4fc3f7, #29b6f6); color: black; border: none; border-radius: 5px; cursor: pointer; font-weight: bold; }
        .point-control { display: flex; align-items: center; gap: 10px; margin: 10px 0; justify-content: center; }
        .point-input { width: 80px; padding: 8px; text-align: center; }
    </style>
</head>
<body>
    <div class="stars" id="stars"></div>
    <div class="container">
        <div id="loginScreen">
            <header>
                <h1>ğŸš€ ×—×™×“×•×Ÿ ×—×œ×œ - ×‘×™×ª ×¡×¤×¨</h1>
                <p>××¢×¨×›×ª × ×™×”×•×œ ×›×™×ª×•×ª - ×”×¨×©××”</p>
            </header>
            <div class="login-container">
                <h2>×”×ª×—×‘×¨×•×ª ×œ××¢×¨×›×ª</h2>
                <div class="role-selector">
                    <button class="role-btn active" onclick="selectRole('student')">×ª×œ××™×“/×”</button>
                    <button class="role-btn" onclick="selectRole('teacher')">××•×¨×”</button>
                </div>
                <div class="input-group">
                    <label for="userName">×©× ××œ×:</label>
                    <input type="text" id="userName" placeholder="×”×›× ×™×¡×• ××ª ×©××›×">
                </div>
                <div class="input-group" id="passwordGroup" style="display: none;">
                    <label for="password">×¡×™×¡××ª ××•×¨×”:</label>
                    <input type="password" id="password" placeholder="×”×›× ×™×¡×• ×¡×™×¡××”">

                </div>
                <div class="input-group">
                    <label for="loginClass">×‘×—×¨×• ×›×™×ª×”:</label>
                    <select id="loginClass">
                        <option value="">-- ×‘×—×¨×• ×›×™×ª×” --</option>
                        <option value="×–1">×–1</option><option value="×–2">×–2</option><option value="×–3">×–3</option>
                        <option value="×–4">×–4</option><option value="×–5">×–5</option><option value="×–6">×–6</option>
                        <option value="×–7">×–7</option><option value="×—1">×—1</option><option value="×—2">×—2</option>
                        <option value="×—3">×—3</option><option value="×—4">×—4</option><option value="×—5">×—5</option>
                        <option value="×—6">×—6</option><option value="×˜1">×˜1</option><option value="×˜2">×˜2</option>
                        <option value="×˜3">×˜3</option><option value="×˜4">×˜4</option><option value="×˜5">×˜5</option>
                        <option value="×˜6">×˜6</option>
                    </select>
                </div>
                <div class="controls">
                    <button id="loginBtn" onclick="login()">×›× ×™×¡×” ×œ××¢×¨×›×ª</button>
                </div>
            </div>
        </div>
        <div id="studentScreen" class="hidden">
            <div class="logout-section">
                <button id="logoutBtn" onclick="logout()">×™×¦×™××”</button>
            </div>
            <header>
                <h1>ğŸš€ ×—×™×“×•×Ÿ ×—×œ×œ - ×‘×™×ª ×¡×¤×¨</h1>
                <p id="studentWelcome">×‘×¨×•×›×™× ×”×‘××™×!</p>
            </header>
            <div class="class-selector">
                <h2>×©×œ×•× <span id="studentName"></span>!</h2>
                <p>××ª× ××›×™×ª×”: <span id="studentClass" style="font-weight: bold; color: #ffca28;"></span></p>
            </div>
            <div class="quiz-container">
                <div id="startScreen">
                    <h2>×‘×¨×•×›×™× ×”×‘××™× ×œ×—×™×“×•×Ÿ ×”×—×œ×œ!</h2>
                    <p>×œ×—×¦×• ×¢×œ "×”×ª×—×œ ×—×™×“×•×Ÿ" ×›×“×™ ×œ×”×ª×—×™×œ</p>
                    <p>×™×© 50 ×©××œ×•×ª ×—×œ×œ ××¢× ×™×™× ×•×ª ×¢× 4 ×ª×©×•×‘×•×ª ×œ×›×œ ×©××œ×”</p>
                    <p>×œ×›×œ ×ª×©×•×‘×” × ×›×•× ×” - ×”×›×™×ª×” ××§×‘×œ×ª × ×§×•×“×”!</p>
                    <div class="controls">
                        <button id="startBtn" onclick="startQuiz()">×”×ª×—×œ ×—×™×“×•×Ÿ</button>
                    </div>
                </div>
                <div id="quizScreen" style="display: none;">
                    <div class="question-box">
                        <div class="question-text" id="questionText"></div>
                        <div class="answers-grid" id="answersContainer"></div>
                    </div>
                    <div class="progress">
                        ×©××œ×” <span id="currentQuestion">1</span> ××ª×•×š 50
                    </div>
                    <div class="feedback" id="feedback"></div>
                    <div class="controls">
                        <button id="nextBtn" onclick="nextQuestion()" style="display: none;">×©××œ×” ×”×‘××”</button>
                    </div>
                </div>
            </div>
            <div class="scoreboard">
                <h2>ğŸ† ×œ×•×— × ×™×§×•×“ ×›×™×ª×•×ª</h2>
                <div class="score-grid" id="scoreboard"></div>
            </div>
        </div>
        <div id="teacherScreen" class="hidden">
            <div class="logout-section">
                <button id="logoutBtnTeacher" onclick="logout()">×™×¦×™××”</button>
            </div>
            <header>
                <h1>ğŸš€ ×—×™×“×•×Ÿ ×—×œ×œ - ××¢×¨×›×ª ××•×¨×™×</h1>
                <p id="teacherWelcome">×‘×¨×•×›×™× ×”×‘××™×!</p>
            </header>
            <div class="teacher-menu">
                <h2>×©×œ×•× <span id="teacherName"></span>!</h2>
                <p>××ª× ××•×¨×” ×©×œ ×›×™×ª×”: <span id="teacherClass" style="font-weight: bold; color: #ffca28;"></span></p>
                <p style="color: #81d4fa; margin-top: 10px;">×›××Ÿ ×ª×•×›×œ×• ×œ× ×”×œ ××ª ×”× ×§×•×“×•×ª ×©×œ ×”×›×™×ª×” ×©×œ×›×</p>
            </div>
            <div class="teacher-menu">
                <h3>× ×™×”×•×œ × ×§×•×“×•×ª ×›×™×ª×”</h3>
                <div class="admin-controls">
                    <div class="admin-panel">
                        <h4>×”×•×¡×¤×ª × ×§×•×“×•×ª</h4>
                        <div class="point-control">
                            <button class="admin-btn" onclick="addPointsToClass(1)">+1 × ×§×•×“×”</button>
                            <button class="admin-btn" onclick="addPointsToClass(5)">+5 × ×§×•×“×•×ª</button>
                            <button class="admin-btn" onclick="addPointsToClass(10)">+10 × ×§×•×“×•×ª</button>
                        </div>
                        <input type="number" id="customPoints" class="point-input" placeholder="××¡×¤×¨" min="1" max="100">
                        <button class="admin-btn" onclick="addCustomPoints()">×”×•×¡×£ × ×§×•×“×•×ª</button>
                    </div>
                    <div class="admin-panel">
                        <h4>× ×™×”×•×œ × ×§×•×“×•×ª</h4>
                        <button class="admin-btn" onclick="resetClassPoints()">××¤×¡ × ×§×•×“×•×ª ×œ×›×™×ª×” ×©×œ×™</button>
                        <button class="admin-btn" onclick="showAllPoints()">×”×¦×’ × ×§×•×“×•×ª ×›×œ ×”×›×™×ª×•×ª</button>
                    </div>
                </div>
            </div>
            <div class="scoreboard">
                <h2>ğŸ† ×œ×•×— × ×™×§×•×“ ×›×™×ª×•×ª - × ×™×”×•×œ ××•×¨×”</h2>
                <div class="score-grid" id="teacherScoreboard"></div>
            </div>
            <div class="teacher-menu">
                <h3>××¦×‘ ×—×™×“×•×Ÿ</h3>
                <p>×”×ª×œ××™×“×™× ×™×›×•×œ×™× ×›×¢×ª ×œ×”×©×ª×ª×£ ×‘×—×™×“×•×Ÿ ×•×œ×¦×‘×•×¨ × ×§×•×“×•×ª ×œ×›×™×ª×”.</p>
                <div class="controls">
                    <button onclick="resetAllPoints()" style="background: linear-gradient(145deg, #f44336, #d32f2f);">××¤×¡ ××ª ×›×œ ×”× ×§×•×“×•×ª ×‘××¢×¨×›×ª</button>
                </div>
                <p style="color: #ff9800; font-size: 14px; margin-top: 10px;">âš ï¸ ×©×™××• ×œ×‘: ××™×¤×•×¡ ×›×œ ×”× ×§×•×“×•×ª ×™×¤×¢×œ ×¢×œ ×›×œ ×”×›×™×ª×•×ª ×•×œ× × ×™×ª×Ÿ ×œ×©×—×–×¨!</p>
            </div>
        </div>
    </div>
    <script>
        function createStars() {
            const starsContainer = document.getElementById('stars');
            for (let i = 0; i < 100; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.width = Math.random() * 3 + 'px';
                star.style.height = star.style.width;
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.animationDelay = Math.random() * 5 + 's';
                starsContainer.appendChild(star);
            }
        }
        const classes = ["×–1","×–2","×–3","×–4","×–5","×–6","×–7","×—1","×—2","×—3","×—4","×—5","×—6","×˜1","×˜2","×˜3","×˜4","×˜5","×˜6"];
        let currentUser = null;
        let currentRole = 'student';
        let classPoints = {};
        let teacherPassword = "1957";
        const questions = [
            {question: "××™×–×” ×›×•×›×‘ ×œ×›×ª × ×§×¨× '×›×•×›×‘ ×”×œ×›×ª ×”××“×•×'?", answers: ["× ×•×’×”","×××“×™×","×¦×“×§","×©×‘×ª××™"], correct: 1},
            {question: "××”×• ×›×•×›×‘ ×”×œ×›×ª ×”×’×“×•×œ ×‘×™×•×ª×¨ ×‘××¢×¨×›×ª ×”×©××©?", answers: ["×›×“×•×¨ ×”××¨×¥","×©×‘×ª××™","×¦×“×§","× ×¤×˜×•×Ÿ"], correct: 2},
            {question: "××™ ×”×™×” ×”××“× ×”×¨××©×•×Ÿ ×©×¦×¢×“ ×¢×œ ×”×™×¨×—?", answers: ["×™×•×¨×™ ×’×’××¨×™×Ÿ","×‘××– ××•×œ×“×¨×™×Ÿ","× ×™×œ ××¨××¡×˜×¨×•× ×’","××™×™×§×œ ×§×•×œ×™× ×¡"], correct: 2},
            {question: "××” ×©××” ×©×œ ×”×’×œ×§×¡×™×” ×©×œ× ×•?", answers: ["×× ×“×¨×•××“×”","×©×‘×™×œ ×”×—×œ×‘","×’×œ×§×¡×™×™×ª ×”×¡×•××‘×¨×¨×•","×’×œ×§×¡×™×™×ª ×”××¢×¨×‘×•×œ×ª"], correct: 1},
            {question: "××™×–×” ×›×•×›×‘ ×œ×›×ª ×™×“×•×¢ ×‘×˜×‘×¢×•×ª×™×• ×”××¨×”×™×‘×•×ª?", answers: ["×¦×“×§","× ×¤×˜×•×Ÿ","××•×¨× ×•×¡","×©×‘×ª××™"], correct: 3}
        ];
        let currentQuestionIndex = 0;
        let quizActive = false;
        function initPage() {
            createStars();
            classes.forEach(cls => {
                classPoints[cls] = localStorage.getItem(`spaceQuiz_points_${cls}`) ? parseInt(localStorage.getItem(`spaceQuiz_points_${cls}`)) : 0;
            });
            selectRole('student');
        }
        function selectRole(role) {
            currentRole = role;
            document.querySelectorAll('.role-btn').forEach(btn => { btn.classList.remove('active'); });
            event.target.classList.add('active');
            document.getElementById('passwordGroup').style.display = role === 'teacher' ? 'block' : 'none';
        }
        function login() {
            const userName = document.getElementById('userName').value.trim();
            const userClass = document.getElementById('loginClass').value;
            const password = document.getElementById('password').value;
            if (!userName) { alert("×× × ×”×›× ×™×¡×• ×©× ××œ×"); return; }
            if (!userClass) { alert("×× × ×‘×—×¨×• ×›×™×ª×”"); return; }
           
            }
            currentUser = { name: userName, class: userClass, role: currentRole, loginTime: new Date().toLocaleString('he-IL') };
            if (currentRole === 'student') { showStudentScreen(); } else { showTeacherScreen(); }
            localStorage.setItem('spaceQuiz_lastUser', JSON.stringify(currentUser));
        }
        function showStudentScreen() {
            document.getElementById('loginScreen').classList.add('hidden');
            document.getElementById('teacherScreen').classList.add('hidden');
            document.getElementById('studentScreen').classList.remove('hidden');
            document.getElementById('studentName').textContent = currentUser.name;
            document.getElementById('studentClass').textContent = currentUser.class;
            document.getElementById('studentWelcome').textContent = `×‘×¨×•×š ×”×‘× ${currentUser.name}, ×”×ª×—×‘×¨×ª ×›××©×ª××© ×ª×œ××™×“`;
            updateScoreboard();
        }
        function showTeacherScreen() {
            document.getElementById('loginScreen').classList.add('hidden');
            document.getElementById('studentScreen').classList.add('hidden');
            document.getElementById('teacherScreen').classList.remove('hidden');
            document.getElementById('teacherName').textContent = currentUser.name;
            document.getElementById('teacherClass').textContent = currentUser.class;
            document.getElementById('teacherWelcome').textContent = `×‘×¨×•×š ×”×‘× ${currentUser.name}, ×”×ª×—×‘×¨×ª ×›××©×ª××© ××•×¨×”`;
            updateTeacherScoreboard();
        }
        function logout() {
            if (confirm("×”×× ××ª× ×‘×˜×•×—×™× ×©×‘×¨×¦×•× ×›× ×œ×¦××ª?")) {
                currentUser = null;
                document.getElementById('userName').value = '';
                document.getElementById('password').value = '';
                document.getElementById('loginClass').value = '';
                document.getElementById('studentScreen').classList.add('hidden');
                document.getElementById('teacherScreen').classList.add('hidden');
                document.getElementById('loginScreen').classList.remove('hidden');
            }
        }
        function updateScoreboard() {
            const scoreboard = document.getElementById('scoreboard');
            scoreboard.innerHTML = '';
            classes.forEach(cls => {
                const scoreItem = document.createElement('div');
                scoreItem.className = 'score-item';
                scoreItem.innerHTML = `<div class="class-name">${cls}</div><div class="class-points">${classPoints[cls]} × ×§×•×“×•×ª</div>`;
                scoreboard.appendChild(scoreItem);
            });
        }
        function updateTeacherScoreboard() {
            const scoreboard = document.getElementById('teacherScoreboard');
            scoreboard.innerHTML = '';
            classes.forEach(cls => {
                const scoreItem = document.createElement('div');
                scoreItem.className = 'score-item';
                const isTeacherClass = cls === currentUser.class;
                if (isTeacherClass) {
                    scoreItem.style.border = '2px solid #ffca28';
                    scoreItem.style.background = 'rgba(255, 202, 40, 0.1)';
                }
                scoreItem.innerHTML = `
                    <div class="class-name">${cls}</div>
                    <div class="class-points">${classPoints[cls]} × ×§×•×“×•×ª</div>
                    ${isTeacherClass ? `
                    <div class="teacher-controls">
                        <button class="teacher-btn" onclick="addPoints('${cls}', 1)">+1</button>
                        <button class="teacher-btn" onclick="subtractPoints('${cls}', 1)">-1</button>
                    </div>` : ''}
                `;
                scoreboard.appendChild(scoreItem);
            });
        }
        function addPointsToClass(points) {
            if (!currentUser || currentUser.role !== 'teacher') {
                alert("×’×™×©×” × ×“×—×ª×” - ×¨×§ ××•×¨×™× ×™×›×•×œ×™× ×œ×”×•×¡×™×£ × ×§×•×“×•×ª"); return;
            }
            const className = currentUser.class;
            classPoints[className] += points;
            savePoints();
            updateTeacherScoreboard();
            showNotification(`×”×•×¡×¤×ª ${points} × ×§×•×“×•×ª ×œ×›×™×ª×” ${className}`);
        }
        function addCustomPoints() {
            const input = document.getElementById('customPoints');
            const points = parseInt(input.value);
            if (isNaN(points) || points < 1) { alert("×× × ×”×›× ×™×¡×• ××¡×¤×¨ ×ª×§×™×Ÿ ×©×œ × ×§×•×“×•×ª"); return; }
            addPointsToClass(points);
            input.value = '';
        }
        function addPoints(className, points) {
            classPoints[className] += points;
            savePoints();
            updateTeacherScoreboard();
            showNotification(`×”×•×¡×¤×ª ${points} × ×§×•×“×•×ª ×œ×›×™×ª×” ${className}`);
        }
        function subtractPoints(className, points) {
            if (classPoints[className] >= points) {
                classPoints[className] -= points;
                savePoints();
                updateTeacherScoreboard();
                showNotification(`×”×—×¡×¨×ª ${points} × ×§×•×“×•×ª ××›×™×ª×” ${className}`);
            } else { alert("×œ× × ×™×ª×Ÿ ×œ×”×—×¡×™×¨ ×™×•×ª×¨ × ×§×•×“×•×ª ××”×§×™×™×"); }
        }
        function resetClassPoints() {
            if (confirm(`×”×× ××ª× ×‘×˜×•×—×™× ×©×‘×¨×¦×•× ×›× ×œ××¤×¡ ××ª ×”× ×§×•×“×•×ª ×©×œ ×›×™×ª×” ${currentUser.class}?`)) {
                classPoints[currentUser.class] = 0;
                savePoints();
                updateTeacherScoreboard();
                showNotification(`××™×¤×•×¡ × ×§×•×“×•×ª ×œ×›×™×ª×” ${currentUser.class}`);
            }
        }
        function resetAllPoints() {
            if (confirm("âš ï¸ ××–×”×¨×”! ×”×× ××ª× ×‘×˜×•×—×™× ×©×‘×¨×¦×•× ×›× ×œ××¤×¡ ××ª ×›×œ ×”× ×§×•×“×•×ª ×‘×›×œ ×”×›×™×ª×•×ª?\n×¤×¢×•×œ×” ×–×• ×œ× × ×™×ª× ×ª ×œ×‘×™×˜×•×œ!")) {
                classes.forEach(cls => { classPoints[cls] = 0; localStorage.removeItem(`spaceQuiz_points_${cls}`); });
                updateTeacherScoreboard();
                showNotification("×›×œ ×”× ×§×•×“×•×ª ××•×¤×¡×• ×‘×”×¦×œ×—×”");
            }
        }
        function showAllPoints() {
            let message = "× ×§×•×“×•×ª ×›×œ ×”×›×™×ª×•×ª:\n\n";
            classes.forEach(cls => { message += `${cls}: ${classPoints[cls]} × ×§×•×“×•×ª\n`; });
            alert(message);
        }
        function savePoints() { classes.forEach(cls => { localStorage.setItem(`spaceQuiz_points_${cls}`, classPoints[cls]); }); }
        function showNotification(message) { alert(message); }
        function startQuiz() {
            if (!currentUser || currentUser.role !== 'student') { alert("×’×™×©×” × ×“×—×ª×” - ×¨×§ ×ª×œ××™×“×™× ×™×›×•×œ×™× ×œ×©×—×§ ×‘×—×™×“×•×Ÿ"); return; }
            document.getElementById('startScreen').style.display = 'none';
            document.getElementById('quizScreen').style.display = 'block';
            quizActive = true;
            currentQuestionIndex = 0;
            showQuestion();
        }
        function showQuestion() {
            if (currentQuestionIndex >= questions.length) { endQuiz(); return; }
            const question = questions[currentQuestionIndex];
            document.getElementById('questionText').textContent = question.question;
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            const answersContainer = document.getElementById('answersContainer');
            answersContainer.innerHTML = '';
            question.answers.forEach((answer, index) => {
                const button = document.createElement('button');
                button.className = 'answer-btn';
                button.textContent = answer;
                button.onclick = () => checkAnswer(index);
                answersContainer.appendChild(button);
            });
            document.getElementById('nextBtn').style.display = 'none';
            document.getElementById('feedback').style.display = 'none';
        }
        function checkAnswer(selectedIndex) {
            const question = questions[currentQuestionIndex];
            const buttons = document.querySelectorAll('.answer-btn');
            const feedback = document.getElementById('feedback');
            buttons.forEach(btn => btn.disabled = true);
            buttons.forEach((btn, index) => {
                if (index === question.correct) { btn.classList.add('correct'); }
                else if (index === selectedIndex && index !== question.correct) { btn.classList.add('wrong'); }
            });
            if (selectedIndex === question.correct) {
                feedback.textContent = "ğŸ‰ ×ª×©×•×‘×” × ×›×•× ×”! ×”×›×™×ª×” ×§×™×‘×œ×” × ×§×•×“×”!";
                feedback.className = "feedback correct-feedback";
                const className = currentUser.class;
                classPoints[className]++;
                savePoints();
                updateScoreboard();
            } else {
                feedback.textContent = `âŒ ×œ× × ×›×•×Ÿ. ×”×ª×©×•×‘×” ×”× ×›×•× ×” ×”×™×: ${question.answers[question.correct]}`;
                feedback.className = "feedback wrong-feedback";
            }
            feedback.style.display = 'block';
            document.getElementById('nextBtn').style.display = 'inline-block';
        }
        function nextQuestion() {
            currentQuestionIndex++;
            if (currentQuestionIndex < questions.length) { showQuestion(); } else { endQuiz(); }
        }
        function endQuiz() {
            document.getElementById('quizScreen').style.display = 'none';
            document.getElementById('startScreen').style.display = 'block';
            const startScreen = document.getElementById('startScreen');
            startScreen.innerHTML = `
                <h2>×¡×™×™××ª× ××ª ×”×—×™×“×•×Ÿ!</h2>
                <p>×›×™×ª×” ${currentUser.class} ×¦×‘×¨×” ${classPoints[currentUser.class]} × ×§×•×“×•×ª ×‘×¡×š ×”×›×œ</p>
                <p>×›×œ ×”×›×‘×•×“! ×”××©×™×›×• ×›×š ğŸš€</p>
                <div class="controls">
                    <button onclick="startQuiz()">××©×—×§ ×—×•×–×¨</button>
                </div>
            `;
            quizActive = false;
        }
        window.onload = initPage;
    </script>
</body>
</html>
